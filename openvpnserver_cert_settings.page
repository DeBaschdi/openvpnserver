Menu="openvpnserver:1"
Title="Cert and Misc Settings "
---

<div>
<form name="openvpnserver_cert_settings" method="POST" action="/plugins/openvpnserver/openvpnserver_cert_submit.php" target="progressFrame" onsubmit="validateForm_cert();">
<table class="tablesorter openvpnserversettings">
<thead><th colspan="2"><b>OpenVPN Server Cert/Misc Configuration:&nbsp;<img src='/plugins/openvpnserver/images/new_config.png'></b></th><th class="header"></th></thead>
<table class="tablesorter">

              <?if ($pids=="0"):?>
    <td>
        <th colspan="2"><b>Status:&nbsp;</b><img src='/plugins/openvpnserver/images/device_status.png'>
              <?if ($pids=="0"):?>
		<span class="red"><b>Generating cert for the server is still running, please wait !!! refresh the page for progress updates.
             <?endif;?>

           </span>
         </th>
     </td>
             <?endif;?>

 <?if ($openvpnserver_running == "yes"):?>
    <div><left><b>To change configuration - Press Stop in "Control Action"</b></center></div>
    <br />
  <?endif;?>
  
  <?if (($openvpnserver_running != "yes") && ($pids!="0")):?> 
      <dl>
     
	<?if ($openvpnserver_running != "yes"):?>
          <button style="font-size:15px">Save Configuration <i class="fa fa-save"></i></button>
			<br />     
			<br />  
        <?endif;?>
      </dl>
  
     <dl>
      <dt>Start OpenVPN server during array mount</dt>
      <dd>
      <select name="INSTALL_ON_BOOT" id="INSTALL_ON_BOOT" size="1">
      <?=mk_option($openvpnserver_cert_cfg['INSTALL_ON_BOOT'], "enable", "Yes");?>
      <?=mk_option($openvpnserver_cert_cfg['INSTALL_ON_BOOT'], "disable", "No");?>
      </select>
      </dd>
      </dl>

      <dl>
      <dt>Disconnect OpenVPN Server when stopping array</dt>
      <dd>
      <select name="DISCONNECT_ON_UMOUNT" id="DISCONNECT_ON_UMOUNT" size="1">
      <?=mk_option($openvpnserver_cert_cfg['DISCONNECT_ON_UMOUNT'], "no", "No");?>
      <?=mk_option($openvpnserver_cert_cfg['DISCONNECT_ON_UMOUNT'], "yes", "Yes");?>
      </select>
      </dd>
      </dl>

      <dl>
      <dt>RSA key size</dt>
      <dd>
      <select name="EASYRSAKEYSIZE" id="EASYRSAKEYSIZE" size="1" title="If you chose 4096 bits this will take very long time. Depending on your system, this might take up to 30 to 60 minutes">
      <?=mk_option($openvpnserver_cert_cfg['EASYRSAKEYSIZE'], "2048", "2048 bits");?>
      <?=mk_option($openvpnserver_cert_cfg['EASYRSAKEYSIZE'], "4096", "4096 bits");?>
      </select>
      </dd>
      </dl>
	<blockquote class="inline_help">
			<p>If you chose 4096 bits then this will take very long time. Depending on your system, this might take up to 30 to 60 minutes.</p>
	</blockquote>
	
      <dl>
      <dt>Path to store Server, Clients config files and the Easyrsa V3</dt>
      <dd>
      <input type="text" name="SERVER_PATH" id="SERVER_PATH"  required="required" value="<?=$openvpnserver_cert_cfg['SERVER_PATH'];?>" title="" </span><?if (!is_dir($openvpnserver_cert_cfg['SERVER_PATH'])):?><span><i class="fa fa-warning icon warning"></i> Path does not exist</span><?endif;?>
      </dd>
      </dl>

      <dl>
      <dt>Private key pass phrase for signing cert</dt>
      <dd>
      <input type="text" name="PASSPHRASE" id="PASSPHRASE" value="<?=$openvpnserver_cert_cfg['PASSPHRASE'];?>" title="Default is ..."  required="required">
      </dd>
      </dl>   
      
 <?endif;?>
    </table>
 </form> 
</div>
